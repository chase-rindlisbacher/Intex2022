{% extends 'base.html' %}
{% load static %}
{% block pageCSS %}
<link href="{% static 'css/our.css' %}" rel="stylesheet">
{% endblock %}
{% block navigation %}
<nav id="navbar" class="navbar order-last order-lg-0">
  <ul>
    <li><a class="nav-link scrollto" href="{% url 'index' %}">Home</a></li>
    <li><a class="nav-link scrollto" href="{% url 'mydashboard' %}">MyDashboard</a></li>
    <li><a class="nav-link scrollto active" href="{% url 'myfoodjournal' %}">MyFoodJournal</a></li>
    <li><a class="nav-link scrollto" href="{% url 'mycommunity' %}">MyCommunity</a></li>
    <li><a class="nav-link scrollto" href="{% url 'index' %}">MyLearningCenter</a></li>
    <li><a class="nav-link scrollto" href="{% url 'myprofile' %}">MyProfile</a></li>
    <li><a class="nav-link scrollto" href="{% url 'index'  %}#faq">FAQ</a></li>
    <!-- Keep but don't use right now 
    <li class="dropdown"><a href="#"><span>Drop Down</span> <i class="bi bi-chevron-down"></i></a>
      <ul>
        <li><a href="#">Drop Down 1</a></li>
        <li class="dropdown"><a href="#"><span>Deep Drop Down</span> <i class="bi bi-chevron-right"></i></a>
          <ul>
            <li><a href="#">Deep Drop Down 1</a></li>
            <li><a href="#">Deep Drop Down 2</a></li>
            <li><a href="#">Deep Drop Down 3</a></li>
            <li><a href="#">Deep Drop Down 4</a></li>
            <li><a href="#">Deep Drop Down 5</a></li>
          </ul>
        </li>
        <li><a href="#">Drop Down 2</a></li>
        <li><a href="#">Drop Down 3</a></li>
        <li><a href="#">Drop Down 4</a></li>
      </ul>
    </li>-->
  </ul>
  <i class="bi bi-list mobile-nav-toggle"></i>
</nav><!-- .navbar -->
{% if user.is_authenticated %}
<a href="{% url 'logout' %}" class="appointment-btn scrollto"><span class="d-none d-md-inline">Logout</span></a>
{% else %}
<a href="{% url 'login' %}" class="appointment-btn scrollto"><span class="d-none d-md-inline">Login</span></a>
{% endif %}
{% endblock %}
{% block content %}
    <div class="container" style="margin-top: 25vh">
      <h1>Add what you ate or drank</h1>
    
        <div>
          <select name="type" id="type" onchange="SelectInputType(this)">
            <option value="" selected hidden>Choose One</option>
            <option value="food">Food</option>
            <option value="drink">Drink</option>
          </select>
          <label for="type">Choose an entry type</label>
          <br><br>
          <form name="food" id="food" class="d-none" method="post" action"{% url 'myfoodjournaladd' %}">
            {% csrf_token %}
              <div>
                {% if user.is_authenticated %}
                  <input type="text" name="username" id="username" value="{{user.username}}" hidden>
                {% endif %}
                <input type="text" name="form_type" id="form_type" value="food" hidden>
                <input type="text" name="existing" id="existing" value="exists" hidden>
                <div id="presets">
                  <input type="text" name="combo_food" id="combo_food" list="food_options">
                  <datalist id="food_options">
                    {% for food in foods %}
                    <option>{{food.name}}</option>
                    {% endfor %}
                  </datalist>
                  <label for="combo_food">Choose a food or</label>
                  <button type="button" id="add_new_button" onclick="AddNew()">Add new</button>
                  <i></i>
                </div>
                <div id="not_exist" class="d-none">
                  <h5 id="new_header"></h5>
                  <div>
                    <input type="text" id="name" placeholder='spaghetti' name='name' />
                    <label for="name">Name of Item</label>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="text" id="desc" placeholder='has tomatoes, noodles, and meat' name='desc' />
                      <label for="desc">Description</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <select id="food_type" name='food_type' />
                        <option value="" hidden selected>Choose a food type</option>
                        {% for type in food_types %}
                          <option value="{{type.id}}">{{type.name}}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  </br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="na" placeholder='500' name='na' step=".1" />
                      <label for="desc">Sodium (mg) of one unit of food</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="protein" placeholder='5' name='protein' step=".1" />
                      <label for="protein">Protein (g) of one unit of food</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="k" placeholder='200' name='k' step=".1" />
                      <label for="k">Potassium (mg) of one unit of food</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="phos" placeholder='200' name='phos' step=".1" />
                      <label for="phos">Phosphorus (mg) of one unit of food</label>
                    </div>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div> 
                    <input type="date" id="day" name='day' required />
                    <label for="day">Date</label>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div>
                    <select id='eating_time' name="eating_time" required>
                      <option value="breakfast">Breakfast</option>
                      <option value="lunch">Lunch</option>
                      <option value="dinner">Dinner</option>
                      <option value="snack">Snack</option>
                    </select>
                    <label for='eating_time'>When you ate</label>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div>
                    <input type="number" name="quantity" id="quantity" step="0.5" required>
                    <label for="quantity">Quantity eaten</label>
                  </div>
                </div>
                <br>
                <div>
                  <select name="units" id="units">
                    {% for unit in food_units %}
                    <option value="{{unit.id}}">{{unit.name}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <br>
              <button type="submit">Submit</button>
           </form>
           <form name="drink" id="drink" class="d-none" method="post" action"{% url 'myfoodjournaladd' %}">
            {% csrf_token %}
              <div>
                {% if user.is_authenticated %}
                  <input type="text" name="drink_username" id="drink_username" value="{{user.username}}" hidden>
                {% endif %}
                <input type="text" name="form_type" id="form_type" value="drink" hidden>
                <input type="text" name="drink_existing" id="drink_existing" value="exists" hidden>
                <div id="drink_presets">
                  <input type="text" name="combo_drink" id="combo_drink" list="drink_options">
                  <datalist id="drink_options">
                    {% for drink in drinks %}
                    <option>{{drink.name}}</option>
                    {% endfor %}
                  </datalist>
                  <label for="combo_drink">Choose a drink or</label>
                  <button type="button" id="add_new_drink_button" onclick="AddNew()">Add new</button>
                  <i></i>
                </div>
                <div id="drink_not_exist" class="d-none">
                  <h5 id="drink_new_header"></h5>
                  <div>
                    <input type="text" id="drink_name" placeholder='water' name='drink_name' />
                    <label for="drink_name">Name of Item</label>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="text" id="drink_desc" placeholder='optional description' />
                      <label for="drink_desc">Description</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <select id="drink_type" name='drink_type' />
                        <option value="" hidden selected>Choose a drink type</option>
                        {% for type in fluid_types %}
                          <option value="{{type.id}}">{{type.name}}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  </br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="drink_na" placeholder='500' name='drink_na' step=".1" />
                      <label for="drink_na">Sodium (mg)</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="drink_protein" placeholder='5' name='drink_protein' step=".1" />
                      <label for="drink_protein">Protein (g)</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="drink_k" placeholder='200' name='drink_k' step=".1" />
                      <label for="k">Potassium (mg)</label>
                    </div>
                  </div>
                  <br>
                  <div>
                    <i></i>
                    <div>
                      <input type="number" id="drink_phos" placeholder='200' name='drink_phos' step=".1" />
                      <label for="phos">Phosphorus (mg)</label>
                    </div>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div> 
                    <input type="date" id="drink_day" name='drink_day' required />
                    <label for="drink_day">Date</label>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div>
                    <select id='drink_eating_time' name="drinking_time" required>
                      <option value="breakfast">Breakfast</option>
                      <option value="lunch">Lunch</option>
                      <option value="dinner">Dinner</option>
                      <option value="snack">Snack</option>
                      <option value="other">Other</option>
                    </select>
                    <label for='drink_eating_time'>When you ate</label>
                  </div>
                </div>
                <br>
                <div>
                  <i></i>
                  <div>
                    <input type="number" name="drink_quantity" id="drink_quantity">
                    <label for="drink_quantity">Quantity</label>
                  </div>
                </div>
                <br>
                <div>
                  <select name="drink_units" id="drink_units">
                    {% for unit in drink_units %}
                    <option value="{{unit.id}}">{{unit.name}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <br>
              <button type="submit">Submit</button>
           </form>
        </div>
        <br><br><br><br><br><br>
    </div>

{% endblock %}
{% block jsblock %}
    <script>
      function SelectInputType(that) {
        food = document.getElementById('food')
        drink = document.getElementById('drink')
        if (that.value == 'food') {
          food.classList.remove('d-none')
          drink.classList.add('d-none')
          document.getElementById('presets').classList.remove('d-none')
          document.getElementById('new_header').innerHTML = ''
          document.getElementById('not_exist').classList.add('d-none')
        } else if (that.value == 'drink') {
          food.classList.add('d-none')
          drink.classList.remove('d-none')
          document.getElementById('drink_presets').classList.remove('d-none')
          document.getElementById('drink_new_header').innerHTML = ''
          document.getElementById('drink_not_exist').classList.add('d-none')
        } else {
          food.classList.add('d-none')
          drink.classList.add('d-none')
        }
      }

      function AddNew() {
        if (document.getElementById('type').value == 'food') {
          document.getElementById('not_exist').classList.remove('d-none')
          document.getElementById('presets').classList.add('d-none')
          document.getElementById('new_header').innerHTML = 'Please provide this info'
          document.getElementById('existing').value = 'no-exist'
        } else {
          document.getElementById('drink_not_exist').classList.remove('d-none')
          document.getElementById('drink_presets').classList.add('d-none')
          document.getElementById('drink_new_header').innerHTML = 'Please provide this info'
          document.getElementById('drink_existing').value = 'no-exist'
        }
      }
    </script>
{% endblock%}